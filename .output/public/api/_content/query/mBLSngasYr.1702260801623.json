[{"_path":"/docs/core-tech/unblocking-subsequent-outgoing-transactions","_dir":"core-tech","_draft":false,"_partial":false,"_locale":"","title":"Unblocking Subsequent Outgoing Transactions","description":"Disclaimer: this is a draft proposal to be discussed, no particular implementation is planned yet.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Disclaimer: this is a draft proposal to be discussed, no particular implementation is planned yet."}]},{"type":"element","tag":"h1","props":{"id":"problem-description-explained-by-example"},"children":[{"type":"text","value":"Problem description (explained by example)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It's simple: due to atomic UTXO implementation, in case you have 100 Beams in a single UTXO and you want to send 20 Beams to each of the 3 different wallets, the action cannot be completed simultaneously:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The 100 Beams UXTO will be locked being an input for the first transaction, with 20 Beams and 79 Beams as outputs (let's assume that Transaction Fee was 1 Beam for simplicity)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The 79 Beams UTXO will, in turn, be locked again, splitting into 20 Beams and 59 Beams etc"}]}]},{"type":"element","tag":"h2","props":{"id":"why-its-not-cool"},"children":[{"type":"text","value":"Why it's not cool"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Each subsequent transaction needs to wait till the previous transactions will be completed, the waiting time can be as long as 12 hours when the peer doesn't come online"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Currently, the wallet owner can't even create new transaction when UTXO is locked"}]}]},{"type":"element","tag":"h1","props":{"id":"objective-what-user-wants"},"children":[{"type":"text","value":"Objective (what user wants?)"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Just being able to send any amount up to his maximum balance with the lowest delay time possible"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Similar to other currencies, ordinary user doesn't necessarily needs to be immersed into UTXO complexity"}]}]},{"type":"element","tag":"h1","props":{"id":"what-can-be-possibly-done-manually-by-the-user"},"children":[{"type":"text","value":"What can be possibly done manually by the user"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Option 1: Let user to send to multiple peers in a single transaction. Drawbacks:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If one amount was wrong - the entire transaction needs to be restarted - the rest of the peers will wait"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"If one of the peers won't get online - the rest will wait again"}]}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Option 2: Let the user to have a special kind of transaction to split the UTXO he has into UTXO with smaller predefined amounts. Drawbacks:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"User needs to know about the amounts of his future sends upfront if amounts are predefined"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The actual transactions will be delayed till the split transaction will succeed"}]}]}]}]},{"type":"element","tag":"h1","props":{"id":"how-can-we-facilitate-user-needs-in-more-seamless-way"},"children":[{"type":"text","value":"How can we facilitate user needs in more seamless way?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Option 1: Have a special \"split change\" checkbox (set to \"on\" by default) for every outgoing transaction that will cause the change to arrive in multiple UTXO to ensure the user can always send the amounts as granular as 10% (configurable parameter, 10% can be a default value) of what the user sends on average. Drawback A: might cause to too much fragmentation of user UTXO, consolidation might be required. Drawback B: too many outputs will take larger space in the blockchain block, much higher transaction fee will be expected. Upside: the transactions are always unblocked, seamlessly."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Option 2: Collect statistics and run some automatic split in the background. Drawbacks and upsides as in the case above. Probably it's always good to have more than a single UTXO (say 50% at most of the current balance if not below 50 Beams)."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Option 3: allow deferred transactions. Assumption: transactions are triggered shortly one after the other (1 minute, configurable parameter). Drawbacks: first transaction might delay others. Upside: less UTXOs are created comparing to the options above, hence less transaction fee should be paid. Point to notice: when UTXO are also received, some of the outgoing transactions can be unblocked immediately. Explained by example:\n"},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"User has 100 Beams and wants to transfer 20, 20 and 20 Beams to different peers"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"User creates the outgoing transaction of 20 Beams. The transaction is not started during 1 minute (configurable parameter). Remark: the transaction could \"fire\" right away if the user had more than a single UTXO."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"User creates another transaction of 20 Beams within 1 minute. The previous transaction is still delayed."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"User creates yet another transaction of 20 Beams within 1 minute. The previous transactions are still delayed."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"After 1 minute, the first transaction \"fires\" and the split will be created exactly for all the subsequent transactions."}]}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"why-its-not-cool","depth":2,"text":"Why it's not cool"}]}},"_type":"markdown","_id":"content:docs:core-tech:Unblocking-subsequent-outgoing-transactions.md","_source":"content","_file":"docs/core-tech/Unblocking-subsequent-outgoing-transactions.md","_extension":"md"}]