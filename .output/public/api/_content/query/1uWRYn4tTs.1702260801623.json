[{"_path":"/docs/core-tech/cold-wallet-implementation-(deprecated)","_dir":"core-tech","_draft":false,"_partial":false,"_locale":"","title":"Cold wallet implementation","description":"","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"cold-wallet-implementation"},"children":[{"type":"text","value":"Cold wallet implementation"}]},{"type":"element","tag":"h2","props":{"id":"definitions"},"children":[{"type":"text","value":"Definitions"}]},{"type":"element","tag":"h3","props":{"id":"cold-wallet"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"cold"}]},{"type":"text","value":" wallet"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"can generate private keys, i.e. it has "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"master key"}]},{"type":"text","value":" generated from "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"seed phrase"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"has no connection with internet, as a result, it cannot send transactions to the node, and it cannot get proofs and notifications from the node"}]}]},{"type":"element","tag":"h3","props":{"id":"hot-wallet"},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"hot"}]},{"type":"text","value":" wallet"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cannot generate any secrets from master key by the reason that it doesn't have it"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"has internet connection and can send/get messages from the node"}]}]},{"type":"element","tag":"h2","props":{"id":"design"},"children":[{"type":"text","value":"Design"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The goal of this design is to get cold wallet scenario with minimal changes in existing codebase."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The main idea is to split wallet database ("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":") onto two parts: public ("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":") and private ("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db.private"}]},{"type":"text","value":"). The last one should hold master key generated from seed phrase.\n\"Cold\" wallet has both of these files, \"hot\" has public data only. To be able to make tranasctions with this setup user have to constantly move public "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file between \"cold\" and \"hot\" wallets. Since we override "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" we have to stop \"hot\" wallet before we copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file from/into its folder"}]},{"type":"element","tag":"h3","props":{"id":"changes"},"children":[{"type":"text","value":"Changes"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For \"Cold\" wallet we don't set up connection with the node."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"\"Cold\" wallet stores all outgoing encrypted messages into public database ("},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":"), we subclass existing behavior with SBBS"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Add a stage for processing stored incoming messages."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"For \"hot\" wallet there is a need to add some checks if it has master key, also \"hot\" wallet has no ability to decrypt incoming SBBS messages, since it doesn't have private keys, so it has to store all incoming messages from the channel."}]}]},{"type":"element","tag":"h2","props":{"id":"usage"},"children":[{"type":"text","value":"Usage"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To tell wallet that it works in \"cold\" mode you have to add "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"--cold_wallet"}]},{"type":"text","value":" parameter"}]},{"type":"element","tag":"h3","props":{"id":"initialization-of-cold-wallet"},"children":[{"type":"text","value":"Initialization of \"cold\" wallet"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet init --cold_wallet"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This command will create two databases: "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db.private"}]}]},{"type":"element","tag":"h3","props":{"id":"sending-from-cold-wallet"},"children":[{"type":"text","value":"Sending from \"cold\" wallet"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pre-conditions:\nMake sure the cold wallet is synced. In order to do so, follow the next steps:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file to the \"hot\" wallet's data folder."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch the \"hot\" wallet and wait till it's synced."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stop the \"hot\" wallet, copy the "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file into the \"cold\" wallet folder."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch the \"cold\" wallet for listening.\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet listen --cold_wallet"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Now as the \"cold\" wallet is synced, proceed with the next steps:"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"In the cold wallet run the command:\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet send -a <amount> -r<receiver address> -f <fee> --cold_wallet"}]},{"type":"text","value":"\nNote: there is no need in node address in this case"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file to \"hot\" wallet's data folder"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch \"hot\" wallet. It should send encrypted message to the node, also he may get encrypted message back."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stop \"hot\" wallet, copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" file into \"cold\" wallet folder"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch \"cold\" wallet for listening\n"},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet listen --cold_wallet"}]},{"type":"text","value":"\nit should create a signed transaction kernel"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from \"cold\" to \"hot\"\nnew transaction should go to the node and got confirmed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from \"hot\" to \"cold\"\n\"cold\" wallet should have actual balance and transactions statuses"}]}]},{"type":"element","tag":"h3","props":{"id":"receiving-to-cold-wallet"},"children":[{"type":"text","value":"Receiving to \"cold\" wallet"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Generate new address in \"cold\" wallet and send it to the sender"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" to \"hot\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch \"hot\" wallet. Note there will be no new transactions, since \"hot\" wallet cannot decrypt incoming messages"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"stop \"hot\". copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from \"hot\" to \"cold\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch \"cold\" wallet for listening, it should get new transaction and accept it."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from \"cold\" to \"hot\""}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"launch \"hot\", wait until new transaction becomes completed"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"copy "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" \"hot\" to \"cold\" balance and transactions statuses should be correct."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"definitions","depth":2,"text":"Definitions","children":[{"id":"cold-wallet","depth":3,"text":"cold wallet"},{"id":"hot-wallet","depth":3,"text":"hot wallet"}]},{"id":"design","depth":2,"text":"Design","children":[{"id":"changes","depth":3,"text":"Changes"}]},{"id":"usage","depth":2,"text":"Usage","children":[{"id":"initialization-of-cold-wallet","depth":3,"text":"Initialization of \"cold\" wallet"},{"id":"sending-from-cold-wallet","depth":3,"text":"Sending from \"cold\" wallet"},{"id":"receiving-to-cold-wallet","depth":3,"text":"Receiving to \"cold\" wallet"}]}]}},"_type":"markdown","_id":"content:docs:core-tech:Cold-wallet-implementation-(DEPRECATED).md","_source":"content","_file":"docs/core-tech/Cold-wallet-implementation-(DEPRECATED).md","_extension":"md"}]