[{"_path":"/docs/core-tech/setting-up-read-only-wallet-for-monitoring","_dir":"core-tech","_draft":false,"_partial":false,"_locale":"","title":"Setting Up Read Only Wallet For Monitoring","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"overview"},"children":[{"type":"text","value":"Overview"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The intention of this scenario is to have a some kind of monitoring wallet,  which can provide info about the list of the transactions, possibly, the list of UTXO, but without any ability to create or accept a new transaction and without access to any secrets."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In this scenario user should have:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a regular (live ) wallet connected to the node, but initialized in the way, that it has separate storage for private data (master key) and for public data. User should be able to get this public database and provide it to monitoring wallet."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"a read-only (monitoring) wallet api server, also connected to the node. It should have access to the public data only. This server should have set up Access control list (ACL). This wallet does not hold any secret keys"}]}]},{"type":"element","tag":"h2","props":{"id":"setup-live-wallet"},"children":[{"type":"text","value":"Setup live wallet"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Init live wallet with separated private data (--cold_wallet flag allows us to do this)"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet init --cold_wallet"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"it creates new wallet with two databases: "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" for public data and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db.private"}]},{"type":"text","value":" for private."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Create \"own\" node for this wallet, for this you should export wallet's owner key and pass it to the node. This will let this wallet get notifications about UTXO which belong to this wallet."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-wallet export_owner_key"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"beam-node --owner_key=<output from previous command> --peer=<url to existing node on target network>"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Use this wallet for sending/receiving beams. It should work as regular BEAM wallet with no exceptions. You even may put "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db.private"}]},{"type":"text","value":" to the application data folder of UI wallet and it should work."}]}]},{"type":"element","tag":"h2","props":{"id":"setup-read-only-monitoring-wallet"},"children":[{"type":"text","value":"Setup read only monitoring wallet"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"On a different machine, setup another instance of wallet API"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API#user-authorization","rel":["nofollow"]},"children":[{"type":"text","value":"Setup access to you wallet API"}]},{"type":"text","value":"."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Stop monitoring wallet"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Copy "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from live wallet to a monitoring wallet."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Launch wallet API server."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Repeat steps 3 to 5 with updated "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet.db"}]},{"type":"text","value":" from live wallet to get latest transactions."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"wallet-api -n <url of a node with port> --port=<port> --use_acl=1 --acl_path=wallet_api.acl"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This wallet API server should allow to perform:"}]},{"type":"element","tag":"pre","props":{"code":"validate_address\naddr_list\ndelete_address\nedit_address\ntx_status\ntx_list\ntx_cancel\nwallet_status\nget_utxo\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"validate_address\naddr_list\ndelete_address\nedit_address\ntx_status\ntx_list\ntx_cancel\nwallet_status\nget_utxo\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"whereas the following methods should be prohibited (due to lack of secret key)"}]},{"type":"element","tag":"pre","props":{"code":"create_address\ntx_send\ntx_split\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"create_address\ntx_send\ntx_split\n"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"overview","depth":2,"text":"Overview"},{"id":"setup-live-wallet","depth":2,"text":"Setup live wallet"},{"id":"setup-read-only-monitoring-wallet","depth":2,"text":"Setup read only monitoring wallet"}]}},"_type":"markdown","_id":"content:docs:core-tech:Setting-up-read-only-wallet-for-monitoring.md","_source":"content","_file":"docs/core-tech/Setting-up-read-only-wallet-for-monitoring.md","_extension":"md"}]