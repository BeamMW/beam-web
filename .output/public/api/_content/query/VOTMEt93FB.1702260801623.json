[{"_path":"/docs/core-tech/beam-mining-protocol-api-(stratum)","_dir":"core-tech","_draft":false,"_partial":false,"_locale":"","title":"Beam mining protocol API (draft)","description":"The protocol is based on JSON RPC and uses Long Polling to have a conversation between Miner and Node. It describes only mining behavior without payouts at the moment.","body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"beam-mining-protocol-api-draft"},"children":[{"type":"text","value":"Beam mining protocol API (draft)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The protocol is based on JSON RPC and uses "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Long Polling"}]},{"type":"text","value":" to have a conversation between "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Miner"}]},{"type":"text","value":" and "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Node"}]},{"type":"text","value":". It describes only mining behavior without payouts at the moment."}]},{"type":"element","tag":"h1","props":{"id":"regulating-miner-jobs-generation"},"children":[{"type":"text","value":"Regulating miner jobs generation"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Node would generate a new miner job when a block is received (i.e. blockchain state changes), and in addition each time a new transaction appears in the transaction pool (in fluff phase). Generating miner jobs too often has negative impact on the miner (mostly due to increased traffic). To mitigate this impact, we have the following Node configuration parameter:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"miner_job_latency"}]},{"type":"text","value":" - the minimum latency (in milliseconds) for miner job regeneration. Default is 1000 (1 second)."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This parameter regulates max frequency for miner job regeneration due to incoming transactions. The bigger the latency is - the less often would the Node generate miner jobs. It has no effect on a situation when a block is received, in this case the new job is created immediately."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the past we observed a situation where mining pools diluted the miner jobs artificially, by just ignoring some of the jobs generated by the Node. It was probably done to save network traffic, considering the fees collected from the new transactions are negligible."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We encourage miners to stop doing this. To regulate the miner jobs generation frequency it's better to use the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"miner_job_latency"}]},{"type":"text","value":" parameter. This way more packed blocks are mined, giving miners an edge in fees, and less confirmation time for the users.\nIn addition this is essential for the new High-Frequency transaction infrastructure, which gives significant fees for the miners, as well as ultimate user experience."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note also that switching miner jobs often has no effect on hashpower (i.e. it's not wasted). The switch is performed when it has no cost on the mining.\nSo, the only reason to reduce the miner job frequency is the traffic consideration, and the best way to tune it is via "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"miner_job_latency"}]},{"type":"text","value":" parameter. Either way, the job generated by the Node should not be discarded."}]},{"type":"element","tag":"h2","props":{"id":"miner-to-node"},"children":[{"type":"text","value":"Miner to Node"}]},{"type":"element","tag":"h3","props":{"id":"login"},"children":[{"type":"text","value":"Login"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Miner subscribes to the node to receive jobs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"api_key"}]},{"type":"text","value":" - miner registration key."}]},{"type":"element","tag":"pre","props":{"code":"{\n    \"method\" : \"login\", \n    \"api_key\": \"skjdb7343636gucgjdjgd\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\" \n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"method\" : \"login\", \n    \"api_key\": \"skjdb7343636gucgjdjgd\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\" \n}\n"}]}]},{"type":"element","tag":"h3","props":{"id":"solution"},"children":[{"type":"text","value":"Solution"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Miner sends a solution to the node."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"nonce"}]},{"type":"text","value":" - matched nonce for given solution."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"output"}]},{"type":"text","value":" - "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Equhash"}]},{"type":"text","value":" solition for current difficulty."}]},{"type":"element","tag":"pre","props":{"code":"{\n\"id\":\"212\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"solution\",\n\"nonce\":\"0bb11009afc29dbe\",\n\"output\":\"a32a1e04ca447f895cfdd8fd1f96fe2ebdd8cd8f77e9c3010ca7231d5da5d0b0cee7ee857981389070eec196bfb4bd15439ef27dd370c4c763bdbad66d066f7cb2f06318e1a0c68c9f5aa8fe8112c479d9a227759d0f864136f265e9ffd3b276b9ba2243\"\n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n\"id\":\"212\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"solution\",\n\"nonce\":\"0bb11009afc29dbe\",\n\"output\":\"a32a1e04ca447f895cfdd8fd1f96fe2ebdd8cd8f77e9c3010ca7231d5da5d0b0cee7ee857981389070eec196bfb4bd15439ef27dd370c4c763bdbad66d066f7cb2f06318e1a0c68c9f5aa8fe8112c479d9a227759d0f864136f265e9ffd3b276b9ba2243\"\n}\n"}]}]},{"type":"element","tag":"h2","props":{"id":"node-to-miner"},"children":[{"type":"text","value":"Node to Miner"}]},{"type":"element","tag":"h3","props":{"id":"job"},"children":[{"type":"text","value":"Job"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Miner will send new job automatically to connected miners."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" - is a job index"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"input"}]},{"type":"text","value":" - block header data hash (with current "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"difficulty"}]},{"type":"text","value":") as an input parameter for "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"Equihash"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"difficulty"}]},{"type":"text","value":" - current chain difficulty."}]},{"type":"element","tag":"pre","props":{"code":"{ \n\"difficulty\":3441671469,\n\"id\":\"212\",\n\"input\":\"636b90cc38bc7a347f074d9ca97c3a2158330f6844f8f52075a38a15ab483223\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"job\"\n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{ \n\"difficulty\":3441671469,\n\"id\":\"212\",\n\"input\":\"636b90cc38bc7a347f074d9ca97c3a2158330f6844f8f52075a38a15ab483223\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"job\"\n}\n"}]}]},{"type":"element","tag":"h3","props":{"id":"cancel"},"children":[{"type":"text","value":"Cancel"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Miner will send a notification to cancel job with a given id"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"id"}]},{"type":"text","value":" - is a job index"}]},{"type":"element","tag":"pre","props":{"code":"{ \n\"id\":\"212\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"cancel\"\n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{ \n\"id\":\"212\",\n\"jsonrpc\":\"2.0\",\n\"method\":\"cancel\"\n}\n"}]}]},{"type":"element","tag":"h3","props":{"id":"result"},"children":[{"type":"text","value":"Result"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This is what server will return to "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"login"}]},{"type":"text","value":" or "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"solution"}]},{"type":"text","value":" requests, identified by id string of message has been sent from the miner to the node."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example 1 (login failed):"}]},{"type":"element","tag":"pre","props":{"code":"{\n    \"code\":-32003,\n    \"description\":\"Login failed\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"result\"\n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"code\":-32003,\n    \"description\":\"Login failed\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"result\"\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example 2 (solution accepted):"}]},{"type":"element","tag":"pre","props":{"code":"{\n    \"code\":1,\n    \"description\":\"accepted\",\n    \"id\":\"212\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"result\"\n}\n","language":"json","meta":"","className":["language-json"]},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"code\":1,\n    \"description\":\"accepted\",\n    \"id\":\"212\",\n    \"jsonrpc\":\"2.0\",\n    \"method\":\"result\"\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Example 3: (reply with nonce prefix)"}]},{"type":"element","tag":"pre","props":{"code":"{\n    \"code\":0,\n    \"description\":\"Login successful\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\",\n    \"nonceprefix\":\"ab4e3a\",\n    \"method\":\"result\"\n}\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"{\n    \"code\":0,\n    \"description\":\"Login successful\",\n    \"id\":\"login\",\n    \"jsonrpc\":\"2.0\",\n    \"nonceprefix\":\"ab4e3a\",\n    \"method\":\"result\"\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: \"nonceprefix\" is an optional component.\nIf \"nonceprefix\" is given the first bytes of the used nonce must match the given pattern. Allowed is a prefix from 0 to 6 bytes. If \"nonceprefix\" is not given the miner may use the full nonce range."}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"miner-to-node","depth":2,"text":"Miner to Node","children":[{"id":"login","depth":3,"text":"Login"},{"id":"solution","depth":3,"text":"Solution"}]},{"id":"node-to-miner","depth":2,"text":"Node to Miner","children":[{"id":"job","depth":3,"text":"Job"},{"id":"cancel","depth":3,"text":"Cancel"},{"id":"result","depth":3,"text":"Result"}]}]}},"_type":"markdown","_id":"content:docs:core-tech:Beam-mining-protocol-API-(Stratum).md","_source":"content","_file":"docs/core-tech/Beam-mining-protocol-API-(Stratum).md","_extension":"md"},{"_path":"/docs/core-tech/beam-mining","_dir":"core-tech","_draft":false,"_partial":false,"_locale":"","title":"BEAM Mining","description":"This page contains general information. For Step By Step guides on how to start Mining Beam please refer to:","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This page contains general information. For Step By Step guides on how to start Mining Beam please refer to:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://beam-docs.readthedocs.io/en/latest/rtd_pages/user_mining_beam.html","rel":["nofollow"]},"children":[{"type":"text","value":"https://beam-docs.readthedocs.io/en/latest/rtd_pages/user_mining_beam.html"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Alike most cryptocurrencies, Beam relies on miners to add transactions to the blockchain. While all nodes in the Beam network confirm the validity of transactions, Beam counts on miners to take on the massive heavy lifting to guard the network."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Beam is a Mimblewimble implementation. We use classic Proof-of-Work (PoW) consensus."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"We welcome everyone to join our mining community to support the network and earn Beam coins."}]},{"type":"element","tag":"h1","props":{"id":"mining-algorithm"},"children":[{"type":"text","value":"Mining Algorithm"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To secure the network, Beam uses the "},{"type":"element","tag":"a","props":{"href":"https://www.cryptolux.org/index.php/Equihash","rel":["nofollow"]},"children":[{"type":"text","value":"Equihash"}]},{"type":"text","value":" proof-of-work mining algorithm). Miners compete against each other using their computing power produce a new block on the chain. The first miner that gets to complete the precise computation for each block is granted with a network standard block reward and any fees for transactions added to that block."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"At Mainnet launch, we will use the following Equihash parameters: "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"n=150"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"k=5"}]},{"type":"text","value":". In addition, we will introduce a small change to the datapath to further reduce the chance of zero-day ASICs."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Note: in Testnet 3 we are still using "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"n=144"}]},{"type":"text","value":", "},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"k=5"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The minimal memory requirement for the GPU will be 4 GB. The most up-to-date list of supported GPUs will be available "},{"type":"element","tag":"a","props":{"href":"https://github.com/BeamMW/beam/wiki/Supported-GPU-cards-for-mining-(NVIDIA)","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"block-size-and-time"},"children":[{"type":"text","value":"Block Size and Time"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A Beam block will be generated approximately every minute and contain about 1000 transactions. Block size will be roughly 1MB."}]},{"type":"element","tag":"h1","props":{"id":"miner-rewards"},"children":[{"type":"text","value":"Miner Rewards"}]},{"type":"element","tag":"h2","props":{"id":"block-rewards"},"children":[{"type":"text","value":"Block Rewards"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"During the first year of Beam existence, miner reward will be 80 coins per block. In years 2-5 the reward will be 40 coins per block. In year 6 the reward will be to 25 coins, and then halving will occur every 4 years until year 129. After year 133, Beam emission will stop."}]},{"type":"element","tag":"h2","props":{"id":"treasury"},"children":[{"type":"text","value":"Treasury"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the first five years of existence, additional coins will be issued to Beam Treasury with each newly mined Beam block."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In the first year, the Treasury will receive additional 20 Beams per  block, and in the years 2-5 the Treasury will receive 10 coins per block."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The Treasury will be used to repay Beam investors, Incentivize the Core Team and to support the Beam Foundation (largest single beneficiary of the Treasury)."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The distribution of the Treasury Coins is performed on a quarterly basis in the following proportion:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Investors: 35%"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Core Team and Advisors: 40%"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Beam Foundation: 20% (Biggest single beneficiary)"}]}]},{"type":"element","tag":"h2","props":{"id":"asic-resistance"},"children":[{"type":"text","value":"ASIC Resistance"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To ensure better decentralization, Beam plans to stay ASIC resistance in the first 12-18 months. To achieve this, we plan to perform one or two hard forks – first after approximately 6 months of existence and another one after approximately 12 months. Each hard fork will change the mining algorithm. The exact modifications will be revealed several weeks before the actual hard fork."}]},{"type":"element","tag":"h2","props":{"id":"how-to-mine-beam"},"children":[{"type":"text","value":"How to Mine Beam"}]},{"type":"element","tag":"h3","props":{"id":"mining-with-standalone-node"},"children":[{"type":"text","value":"Mining with Standalone Node"}]},{"type":"element","tag":"h4","props":{"id":"using-external-miner"},"children":[{"type":"text","value":"Using External Miner"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"For more complex configurations, one or more external miners can be connected to a Beam Node instance.\nThe external miner software is available for download "},{"type":"element","tag":"a","props":{"href":"https://www.beam.mw/downloads","rel":["nofollow"]},"children":[{"type":"text","value":"here"}]},{"type":"text","value":", and the detailed instructions for running it are (here)"},{"type":"element","tag":"span","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/beam-mw/beam/wiki/Instructions-for-Command-Line-GPU-Miner","rel":["nofollow"]},"children":[{"type":"text","value":"https://github.com/beam-mw/beam/wiki/Instructions-for-Command-Line-GPU-Miner"}]}]},{"type":"text","value":"."}]},{"type":"element","tag":"h1","props":{"id":"how-can-you-help"},"children":[{"type":"text","value":"How can you help?"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Want to help developing Beam mining infrastructure? Have GPU development skills or experience with mining pools? Write to us at "},{"type":"element","tag":"a","props":{"href":"mailto:mining@beam.mw"},"children":[{"type":"text","value":"mining@beam.mw"}]},{"type":"text","value":". Fair compensation will be offered to qualified developers."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Own a mining farm and want to mine Beam at launch? Join Beam Mining community on Telegram or contact us at "},{"type":"element","tag":"a","props":{"href":"mailto:mining@beam.mw"},"children":[{"type":"text","value":"mining@beam.mw"}]},{"type":"text","value":"."}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"block-rewards","depth":2,"text":"Block Rewards"},{"id":"treasury","depth":2,"text":"Treasury"},{"id":"asic-resistance","depth":2,"text":"ASIC Resistance"},{"id":"how-to-mine-beam","depth":2,"text":"How to Mine Beam","children":[{"id":"mining-with-standalone-node","depth":3,"text":"Mining with Standalone Node"}]}]}},"_type":"markdown","_id":"content:docs:core-tech:BEAM-Mining.md","_source":"content","_file":"docs/core-tech/BEAM-Mining.md","_extension":"md"}]