[{"data":1,"prerenderedAt":168},["Reactive",2],{"content-query-C5tM0MPM00":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":163,"_id":164,"_source":165,"_file":166,"_extension":167},"/docs/core-tech/dmmr-internal-layout","core-tech",false,"","DMMR Internal Layout","In Merkle trees there are leaf nodes that are added explicitly, and appropriate non-leaf nodes which are created on-demand.",{"type":11,"children":12,"toc":160},"root",[13,20,33,74,79,89,94,99,104,155],{"type":14,"tag":15,"props":16,"children":17},"element","p",{},[18],{"type":19,"value":9},"text",{"type":14,"tag":15,"props":21,"children":22},{},[23,25,31],{"type":19,"value":24},"Our DMMR consists of ",{"type":14,"tag":26,"props":27,"children":28},"em",{},[29],{"type":19,"value":30},"Elements",{"type":19,"value":32}," of variable size, whereas each new element internally contains all the supposed non-leaf nodes. Technically element consists of:",{"type":14,"tag":34,"props":35,"children":36},"ol",{},[37,43,69],{"type":14,"tag":38,"props":39,"children":40},"li",{},[41],{"type":19,"value":42},"Hashes of the assumed non-leaf nodes",{"type":14,"tag":38,"props":44,"children":45},{},[46,51,53],{"type":14,"tag":26,"props":47,"children":48},{},[49],{"type":19,"value":50},"Pointers",{"type":19,"value":52}," to the elements that contain the siblings assumed by the above non-leaf nodes.\n",{"type":14,"tag":54,"props":55,"children":56},"ul",{},[57],{"type":14,"tag":38,"props":58,"children":59},{},[60,62,67],{"type":19,"value":61},"By ",{"type":14,"tag":26,"props":63,"children":64},{},[65],{"type":19,"value":66},"pointers",{"type":19,"value":68}," we mean the information used to access the element, not necessarily the memory pointer.",{"type":14,"tag":38,"props":70,"children":71},{},[72],{"type":19,"value":73},"A pointer to the last element of the previous MMR peak.",{"type":14,"tag":15,"props":75,"children":76},{},[77],{"type":19,"value":78},"For example, consider and MMR containing 10 items:",{"type":14,"tag":80,"props":81,"children":83},"pre",{"code":82},"                         *\n                        / \\\n                       /   \\\n                      /     \\\n                     /       \\\n                    /         \\\n                   /           \\\n                  /             \\\n                 /               \\\n                /                 \\\n               /                   \\\n              /                     \\\n             *                       *\n            / \\                     / \\\n           /   \\                   /   \\\n          /     \\                 /     \\\n         /       \\               /       \\\n        /         \\             /         \\\n       *           *           *           *           *\n      / \\         / \\         / \\         / \\         / \\\n     /   \\       /   \\       /   \\       /   \\       /   \\\n    0     1     2     3     4     5     6     7     8     9\n",[84],{"type":14,"tag":85,"props":86,"children":87},"code",{"__ignoreMap":7},[88],{"type":19,"value":82},{"type":14,"tag":15,"props":90,"children":91},{},[92],{"type":19,"value":93},"In our DMMR this is represented by the following data:",{"type":14,"tag":15,"props":95,"children":96},{},[97],{"type":19,"value":98},"[[/images/dmmr1.png]]",{"type":14,"tag":15,"props":100,"children":101},{},[102],{"type":19,"value":103},"There are 10 elements of varying size, denoted by different colors. Rectangles outline the data and the non-leaf hashes of which the elements comprise. Lines denote pointers to the parent elements. We see the following:",{"type":14,"tag":54,"props":105,"children":106},{},[107,112,117,143],{"type":14,"tag":38,"props":108,"children":109},{},[110],{"type":19,"value":111},"Elements with odd index contain extra hashes, denoted by asterisk (*). The number of hashes equals to the height of the formed peak.",{"type":14,"tag":38,"props":113,"children":114},{},[115],{"type":19,"value":116},"For every extra hash there is also a pointer to the last element of the appropriate sibling node.",{"type":14,"tag":38,"props":118,"children":119},{},[120,122],{"type":19,"value":121},"Most of the elements in addition have a pointer to the last element of the previous MMR peak, denoted by a curly line.\n",{"type":14,"tag":54,"props":123,"children":124},{},[125,130],{"type":14,"tag":38,"props":126,"children":127},{},[128],{"type":19,"value":129},"The exceptions are elements at position 0, 1, 3, 7, because they are last elements of the only peak.",{"type":14,"tag":38,"props":131,"children":132},{},[133,135,141],{"type":19,"value":134},"This is obviously the property of elements at positions 2",{"type":14,"tag":136,"props":137,"children":138},"sup",{},[139],{"type":19,"value":140},"n",{"type":19,"value":142},"-1.",{"type":14,"tag":38,"props":144,"children":145},{},[146,148,153],{"type":19,"value":147},"The only element that contains no data is the 1",{"type":14,"tag":136,"props":149,"children":150},{},[151],{"type":19,"value":152},"st",{"type":19,"value":154},", at position 0.",{"type":14,"tag":15,"props":156,"children":157},{},[158],{"type":19,"value":159},"It's easy to see that each element has access to all the parent elements and their datas. Hence it can be used as an effective MMR implementation with all the relevant functionality, such as calculating the root, and generating proofs.",{"title":7,"searchDepth":161,"depth":161,"links":162},2,[],"markdown","content:docs:core-tech:DMMR-internal-layout.md","content","docs/core-tech/DMMR-internal-layout.md","md",1702260895452]