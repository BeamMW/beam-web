[{"data":1,"prerenderedAt":705},["Reactive",2],{"content-query-RfA0r2JCTE":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"body":10,"_type":700,"_id":701,"_source":702,"_file":703,"_extension":704},"/docs/core-tech/beam-wallet-protocol-api","core-tech",false,"","Beam Wallet Protocol API","Starting with v6.0 BEAM wallet supports API versioning using the --api_version option. Please choose the corresponding API version in the list below to get the description of the available methods.",{"type":11,"children":12,"toc":681},"root",[13,29,106,111,118,137,143,217,224,233,239,268,276,282,287,295,301,306,317,323,328,336,341,347,360,368,374,400,414,435,441,452,458,477,485,497,505,517,528,534,539,547,552,584,589,595,600,616,635,647,653,658],{"type":14,"tag":15,"props":16,"children":17},"element","p",{},[18,21,27],{"type":19,"value":20},"text","Starting with v6.0 BEAM wallet supports API versioning using the ",{"type":14,"tag":22,"props":23,"children":24},"code",{"className":7},[25],{"type":19,"value":26},"--api_version",{"type":19,"value":28}," option. Please choose the corresponding API version in the list below to get the description of the available methods.",{"type":14,"tag":30,"props":31,"children":32},"ul",{},[33,46,56,66,76,86,96],{"type":14,"tag":34,"props":35,"children":36},"li",{},[37],{"type":14,"tag":38,"props":39,"children":43},"a",{"href":40,"rel":41},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v6.0",[42],"nofollow",[44],{"type":19,"value":45},"version 6.0",{"type":14,"tag":34,"props":47,"children":48},{},[49],{"type":14,"tag":38,"props":50,"children":53},{"href":51,"rel":52},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v6.1",[42],[54],{"type":19,"value":55},"version 6.1",{"type":14,"tag":34,"props":57,"children":58},{},[59],{"type":14,"tag":38,"props":60,"children":63},{"href":61,"rel":62},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v6.2",[42],[64],{"type":19,"value":65},"version 6.2",{"type":14,"tag":34,"props":67,"children":68},{},[69],{"type":14,"tag":38,"props":70,"children":73},{"href":71,"rel":72},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v7.0",[42],[74],{"type":19,"value":75},"version 7.0",{"type":14,"tag":34,"props":77,"children":78},{},[79],{"type":14,"tag":38,"props":80,"children":83},{"href":81,"rel":82},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v7.1",[42],[84],{"type":19,"value":85},"version 7.1",{"type":14,"tag":34,"props":87,"children":88},{},[89],{"type":14,"tag":38,"props":90,"children":93},{"href":91,"rel":92},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v7.2",[42],[94],{"type":19,"value":95},"version 7.2",{"type":14,"tag":34,"props":97,"children":98},{},[99],{"type":14,"tag":38,"props":100,"children":103},{"href":101,"rel":102},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v7.3",[42],[104],{"type":19,"value":105},"version 7.3",{"type":14,"tag":15,"props":107,"children":108},{},[109],{"type":19,"value":110},"The sections below apply to the API versions starting with 6.0 if the other is not explicitly stated.",{"type":14,"tag":112,"props":113,"children":115},"h2",{"id":114},"general",[116],{"type":19,"value":117},"General",{"type":14,"tag":15,"props":119,"children":120},{},[121,123,128,130,135],{"type":19,"value":122},"Wallet API has the same structure as Node Stratum API protocol (JSON RPC 2.0 over TCP connection) and should have an online connection to the node. However, it can work over HTTP using the ",{"type":14,"tag":22,"props":124,"children":125},{"className":7},[126],{"type":19,"value":127},"--use_http=1",{"type":19,"value":129}," option. Send POST requests to ",{"type":14,"tag":22,"props":131,"children":132},{"className":7},[133],{"type":19,"value":134},"http://x.x.x.x:port/api/wallet",{"type":19,"value":136}," in this case.",{"type":14,"tag":112,"props":138,"children":140},{"id":139},"running-wallet-api",[141],{"type":19,"value":142},"Running Wallet API",{"type":14,"tag":15,"props":144,"children":145},{},[146,148,153,155,160,162,167,169,174,176,180,182,187,189,194,196,201,203,208,210,215],{"type":19,"value":147},"Place ",{"type":14,"tag":22,"props":149,"children":150},{"className":7},[151],{"type":19,"value":152},"wallet-api",{"type":19,"value":154}," binary located in the ",{"type":14,"tag":22,"props":156,"children":157},{"className":7},[158],{"type":19,"value":159},"wallet",{"type":19,"value":161}," folder near your ",{"type":14,"tag":22,"props":163,"children":164},{"className":7},[165],{"type":19,"value":166},"wallet.db",{"type":19,"value":168}," and run it. You can specify options in CLI or using ",{"type":14,"tag":22,"props":170,"children":171},{"className":7},[172],{"type":19,"value":173},"wallet-api.cfg",{"type":19,"value":175}," file. Minimal options required are your ",{"type":14,"tag":22,"props":177,"children":178},{"className":7},[179],{"type":19,"value":166},{"type":19,"value":181}," password (",{"type":14,"tag":22,"props":183,"children":184},{"className":7},[185],{"type":19,"value":186},"--pass",{"type":19,"value":188},") and node (",{"type":14,"tag":22,"props":190,"children":191},{"className":7},[192],{"type":19,"value":193},"-n=",{"type":19,"value":195},") to connect to. Please notice that ",{"type":14,"tag":22,"props":197,"children":198},{"className":7},[199],{"type":19,"value":200},"node.db",{"type":19,"value":202}," by default is expected to be located in the current working directory (",{"type":14,"tag":22,"props":204,"children":205},{"className":7},[206],{"type":19,"value":207},"$PWD",{"type":19,"value":209},"). You can change this using the ",{"type":14,"tag":22,"props":211,"children":212},{"className":7},[213],{"type":19,"value":214},"--wallet_path=",{"type":19,"value":216}," option.",{"type":14,"tag":218,"props":219,"children":221},"h3",{"id":220},"wallet-api-general-options",[222],{"type":19,"value":223},"Wallet API general options",{"type":14,"tag":225,"props":226,"children":228},"pre",{"code":227},"  -h [ --help ]                         list of all options\n  -p [ --port ] arg (=10000)            port to start server on\n  -n [ --node_addr ] arg                address of node\n  --wallet_path arg (=wallet.db)        path to the wallet file\n  --pass arg                            password for the wallet\n  --use_http arg (=0)                   use JSON RPC over HTTP\n  --ip_whitelist arg                    IP whitelist\n  --log_cleanup_days arg (=5)           old logfiles cleanup period(days)\n  --node_poll_period arg (=0)           Node poll period in milliseconds. Set\n                                        to 0 to keep a connection. Anyway poll\n                                        period would be no less than the\n                                        expected rate of blocks if it is less\n                                        then it will be rounded up to block\n                                        rate value.\n  --enable_assets                       enable confidential assets transactions\n  --enable_lelantus                     enable Lelantus MW transactions\n  --api_version                         specify API version. Available since v6.0. Acceptable values: current, 6.0, 6.1 &c.\n\nUser authorization options:\n  --use_acl arg (=0)                use Access Control List (ACL)\n  --acl_path arg (=wallet_api.acl)  path to ACL file\n\nTLS protocol options:\n  --use_tls arg (=0)                use TLS protocol\n  --tls_cert arg (=wallet_api.crt)  path to TLS certificate\n  --tls_key arg (=wallet_api.key)   path to TLS private key\n  --tls_request_cert (=false)       request client's certificate for verification for client authentication\n  --tls_reject_unauthorized (=true) server will reject any connection which is not authorized with the list of supplied CAs\n",[229],{"type":14,"tag":22,"props":230,"children":231},{"__ignoreMap":7},[232],{"type":19,"value":227},{"type":14,"tag":218,"props":234,"children":236},{"id":235},"wallet-apicfg-file",[237],{"type":19,"value":238},"wallet-api.cfg file",{"type":14,"tag":15,"props":240,"children":241},{},[242,244,248,250,254,256,260,262,266],{"type":19,"value":243},"The ",{"type":14,"tag":22,"props":245,"children":246},{"className":7},[247],{"type":19,"value":173},{"type":19,"value":249}," file is another way to supply options for the API server. All the options listed above are supported. The ",{"type":14,"tag":22,"props":251,"children":252},{"className":7},[253],{"type":19,"value":173},{"type":19,"value":255}," file is expected to be located in the current working directory (",{"type":14,"tag":22,"props":257,"children":258},{"className":7},[259],{"type":19,"value":207},{"type":19,"value":261},"). Here is an example of the ",{"type":14,"tag":22,"props":263,"children":264},{"className":7},[265],{"type":19,"value":173},{"type":19,"value":267}," file:",{"type":14,"tag":225,"props":269,"children":271},{"code":270},"# password for the wallet\npass=1\n\n# address of node\nnode_addr=127.0.0.1:8888\n\n# port to start server on\nport=10000\n\n# path to wallet file\nwallet_path=/home/user/wallet.db\n\n# use JSON RPC over HTTP\nuse_http=1\n",[272],{"type":14,"tag":22,"props":273,"children":274},{"__ignoreMap":7},[275],{"type":19,"value":270},{"type":14,"tag":112,"props":277,"children":279},{"id":278},"running-api-server-in-tcp-mode",[280],{"type":19,"value":281},"Running API Server in TCP mode",{"type":14,"tag":15,"props":283,"children":284},{},[285],{"type":19,"value":286},"By default API launches in TCP mode. For example:",{"type":14,"tag":15,"props":288,"children":289},{},[290],{"type":14,"tag":22,"props":291,"children":292},{"className":7},[293],{"type":19,"value":294},"./wallet-api --node_addr=172.104.249.212:8101 --pass=123",{"type":14,"tag":112,"props":296,"children":298},{"id":297},"accessing-api-server-via-tcp",[299],{"type":19,"value":300},"Accessing API Server via TCP",{"type":14,"tag":15,"props":302,"children":303},{},[304],{"type":19,"value":305},"Here is an example NodeJS code to get all UTXOs from the Wallet API server that is running in TCP mode",{"type":14,"tag":225,"props":307,"children":312},{"code":308,"language":309,"meta":7,"className":310},"var net = require('net');\n\nvar client = new net.Socket();\nclient.connect(10000, '127.0.0.1', function() {\n    console.log('Connected');\n    client.write(JSON.stringify(\n        {\n            jsonrpc: '2.0',\n            id: 123,\n            method: 'get_utxo',\n            params: {}\n        }) + '\\n');\n});\n\nvar acc = '';\n\nclient.on('data', function(data) {\n    acc += data;\n\n    // searching for \\n symbol to find end of response\n    if(data.indexOf('\\n') != -1)\n    {\n        var res = JSON.parse(acc);\n\n        console.log('Received:', res);\n\n        client.destroy(); // kill client after server's response\n    }\n});\n\nclient.on('close', function() {\n    console.log('Connection closed');\n});\n","js",[311],"language-js",[313],{"type":14,"tag":22,"props":314,"children":315},{"__ignoreMap":7},[316],{"type":19,"value":308},{"type":14,"tag":112,"props":318,"children":320},{"id":319},"running-api-server-in-http-mode",[321],{"type":19,"value":322},"Running API Server in HTTP mode",{"type":14,"tag":15,"props":324,"children":325},{},[326],{"type":19,"value":327},"Run via cli with '--use_http=1':",{"type":14,"tag":15,"props":329,"children":330},{},[331],{"type":14,"tag":22,"props":332,"children":333},{"className":7},[334],{"type":19,"value":335},"./wallet-api --node_addr=172.104.249.212:8101 --pass=123 --use_http=1",{"type":14,"tag":15,"props":337,"children":338},{},[339],{"type":19,"value":340},"Or add 'use_http=1' to the wallet-api.cfg to enable HTTP mode.",{"type":14,"tag":112,"props":342,"children":344},{"id":343},"accessing-api-server-via-http",[345],{"type":19,"value":346},"Accessing API Server via HTTP",{"type":14,"tag":15,"props":348,"children":349},{},[350,352,358],{"type":19,"value":351},"You can perform POST requests using CURL. Here is an example to get the current ",{"type":14,"tag":353,"props":354,"children":355},"em",{},[356],{"type":19,"value":357},"wallet status",{"type":19,"value":359},".",{"type":14,"tag":225,"props":361,"children":363},{"code":362},"curl -d '{\"jsonrpc\":\"2.0\",\"id\":1,\"method\":\"wallet_status\"}' \n     -H \"Content-Type: application/json\" \n     -X POST http://x.x.x.x:port/api/wallet\n",[364],{"type":14,"tag":22,"props":365,"children":366},{"__ignoreMap":7},[367],{"type":19,"value":362},{"type":14,"tag":112,"props":369,"children":371},{"id":370},"tls-encryption",[372],{"type":19,"value":373},"TLS encryption",{"type":14,"tag":15,"props":375,"children":376},{},[377,379,384,386,391,393,398],{"type":19,"value":378},"Add ",{"type":14,"tag":22,"props":380,"children":381},{"className":7},[382],{"type":19,"value":383},"--use_tls=1",{"type":19,"value":385}," to enable TLS encryption. You have supply the valid 3rd-party certificate or create a self signed certificate. Pass them to the API server using ",{"type":14,"tag":22,"props":387,"children":388},{"className":7},[389],{"type":19,"value":390},"--tls_cert",{"type":19,"value":392}," and ",{"type":14,"tag":22,"props":394,"children":395},{"className":7},[396],{"type":19,"value":397},"--tls_key",{"type":19,"value":399}," options.",{"type":14,"tag":15,"props":401,"children":402},{},[403,405,412],{"type":19,"value":404},"For testing you can download the sample certificate and key files from ",{"type":14,"tag":38,"props":406,"children":409},{"href":407,"rel":408},"https://beamx.gitbook.io/beam-node-user-guide/mining-mode/mining-using-external-miner#certificate-and-keys",[42],[410],{"type":19,"value":411},"here",{"type":19,"value":413},"  or clicking the links below:",{"type":14,"tag":15,"props":415,"children":416},{},[417,424,428],{"type":14,"tag":38,"props":418,"children":421},{"href":419,"rel":420},"https://firebasestorage.googleapis.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-MahNa0IaGxTr8GkB5rz%2F-Mb6iKWRWPQD7ljMB61A%2F-Mb6q79H8fH8zbfxJrei%2Fstratum.crt?alt=media&token=29cad8ec-2911-446e-b1d4-991401e19d0d",[42],[422],{"type":19,"value":423},"Certificate  File",{"type":14,"tag":425,"props":426,"children":427},"br",{},[],{"type":14,"tag":38,"props":429,"children":432},{"href":430,"rel":431},"https://firebasestorage.googleapis.com/v0/b/gitbook-28427.appspot.com/o/assets%2F-MahNa0IaGxTr8GkB5rz%2F-Mb6iKWRWPQD7ljMB61A%2F-Mb6qjg8lMk1JOdjnnpG%2Fstratum.key?alt=media&token=4c1d1228-fa6d-4f50-a7d0-020966529204",[42],[433],{"type":19,"value":434},"Certificate  Private Key  File",{"type":14,"tag":112,"props":436,"children":438},{"id":437},"ip-whitelisting",[439],{"type":19,"value":440},"IP whitelisting",{"type":14,"tag":15,"props":442,"children":443},{},[444,445,450],{"type":19,"value":378},{"type":14,"tag":22,"props":446,"children":447},{"className":7},[448],{"type":19,"value":449},"--ip_whitelist=192.168.0.1,192.168.0.2",{"type":19,"value":451}," parameter to restrict access to the API server to certain IP addresses. Connections from other IP address would be rejected.",{"type":14,"tag":112,"props":453,"children":455},{"id":454},"users-authorization",[456],{"type":19,"value":457},"Users authorization",{"type":14,"tag":15,"props":459,"children":460},{},[461,463,468,470,475],{"type":19,"value":462},"API methods can have access rights control if you enable ",{"type":14,"tag":353,"props":464,"children":465},{},[466],{"type":19,"value":467},"Access Control List",{"type":19,"value":469}," (ACL) using ",{"type":14,"tag":22,"props":471,"children":472},{"className":7},[473],{"type":19,"value":474},"--use_acl=1",{"type":19,"value":476}," option. Below is the list of all API methods with the access rights required to call the respective method:",{"type":14,"tag":225,"props":478,"children":480},{"code":479},"create_address       - write access\nvalidate_address     - read access\naddr_list            - read access\ndelete_address       - write access\nedit_address         - write access\ntx_send              - write access\ntx_status            - read access\ntx_split             - write access\ntx_asset_issue       - write access\ntx_asset_consume     - write access\ntx_asset_info        - write access\ntx_cancel            - write access\nget_utxo             - read access\ntx_list              - read access\nwallet_status        - read access\nget_asset_info       - read access\ngenerate_tx_id       - read access\nexport_payment_proof - read access\nverify_payment_proof - read access\ncalc_change          - read access\ninvoke_contract      - write access\nprocess_invoke_data  - write access\nblock_details        - read access\n",[481],{"type":14,"tag":22,"props":482,"children":483},{"__ignoreMap":7},[484],{"type":19,"value":479},{"type":14,"tag":15,"props":486,"children":487},{},[488,490,495],{"type":19,"value":489},"ACL file should look like a list with the access keys and ",{"type":14,"tag":22,"props":491,"children":492},{"className":7},[493],{"type":19,"value":494},"read/write",{"type":19,"value":496}," rights:",{"type":14,"tag":225,"props":498,"children":500},{"code":499},"472e17b0419055ffee3b3813b98ae671579b0ac0dcd6f1a23b11a75ab148cc67 : write\nbd39333a66a8b7cb3804b5978d42312c841dbfa03a1c31fc2f0627eeed6e43f2 : read\nf287176bdd517e9c277778e4c012bf6a3e687dd614fc552a1ed22a3fee7d94f2 : read\n",[501],{"type":14,"tag":22,"props":502,"children":503},{"__ignoreMap":7},[504],{"type":19,"value":499},{"type":14,"tag":15,"props":506,"children":507},{},[508,510,515],{"type":19,"value":509},"Don't forget to send user ",{"type":14,"tag":22,"props":511,"children":512},{"className":7},[513],{"type":19,"value":514},"key",{"type":19,"value":516}," in every JSONRPC request to the API if access control is enabled:",{"type":14,"tag":225,"props":518,"children":523},{"code":519,"language":520,"meta":7,"className":521},"{\n    \"jsonrpc\": \"2.0\",\n    \"id\": 1,\n    \"method\": \"wallet_status\",\n    \"key\": \"bd39333a66a8b7cb3804b5978d42312c841dbfa03a1c31fc2f0627eeed6e43f2\"\n}\n","json",[522],"language-json",[524],{"type":14,"tag":22,"props":525,"children":526},{"__ignoreMap":7},[527],{"type":19,"value":519},{"type":14,"tag":112,"props":529,"children":531},{"id":530},"api-errors-handling",[532],{"type":19,"value":533},"API Errors Handling",{"type":14,"tag":15,"props":535,"children":536},{},[537],{"type":19,"value":538},"Errors are returned as:",{"type":14,"tag":225,"props":540,"children":542},{"code":541},"  error: {\n    code: -32003,\n    data: \"It's not your own address.\",\n    message: 'Invalid address.'\n  }\n",[543],{"type":14,"tag":22,"props":544,"children":545},{"__ignoreMap":7},[546],{"type":19,"value":541},{"type":14,"tag":15,"props":548,"children":549},{},[550],{"type":19,"value":551},"where",{"type":14,"tag":30,"props":553,"children":554},{},[555,564,574],{"type":14,"tag":34,"props":556,"children":557},{},[558,562],{"type":14,"tag":22,"props":559,"children":560},{"className":7},[561],{"type":19,"value":22},{"type":19,"value":563}," is a unique identifier of the error",{"type":14,"tag":34,"props":565,"children":566},{},[567,572],{"type":14,"tag":22,"props":568,"children":569},{"className":7},[570],{"type":19,"value":571},"message",{"type":19,"value":573}," textual description of the error",{"type":14,"tag":34,"props":575,"children":576},{},[577,582],{"type":14,"tag":22,"props":578,"children":579},{"className":7},[580],{"type":19,"value":581},"data",{"type":19,"value":583}," is the contextual data for the error, usually a more detailed description for general error codes",{"type":14,"tag":15,"props":585,"children":586},{},[587],{"type":19,"value":588},"To get the list of the possible error codes check the respective API version.",{"type":14,"tag":112,"props":590,"children":592},{"id":591},"assets-support",[593],{"type":19,"value":594},"Assets Support",{"type":14,"tag":15,"props":596,"children":597},{},[598],{"type":19,"value":599},"v6.0+ API implements confidential assets support. To ensure backward compatibility by default API does not return asset entities (coins, balances, txs &c). Asset operations (send, receive, issue, consume &c.) are disabled as well and if requested for an asset would fail. Also, all incoming transactions that involve assets would be rejected by the Wallet API as well. If you do not enable assets support your old code should be able to use the new API without any changes.",{"type":14,"tag":15,"props":601,"children":602},{},[603],{"type":14,"tag":604,"props":605,"children":606},"strong",{},[607,609,614],{"type":19,"value":608},"To enable assets start your API server with the ",{"type":14,"tag":22,"props":610,"children":611},{"className":7},[612],{"type":19,"value":613},"--enable_assets",{"type":19,"value":615}," option or set this flag to true in the config file.",{"type":14,"tag":15,"props":617,"children":618},{},[619,621,626,628,633],{"type":19,"value":620},"Methods that can return asset entities (for example ",{"type":14,"tag":22,"props":622,"children":623},{"className":7},[624],{"type":19,"value":625},"wallet_status",{"type":19,"value":627}," or ",{"type":14,"tag":22,"props":629,"children":630},{"className":7},[631],{"type":19,"value":632},"get_utxo",{"type":19,"value":634},") might have different return formats if assets are enabled. Please check the respective methods' documentation for details.",{"type":14,"tag":15,"props":636,"children":637},{},[638,640,645],{"type":19,"value":639},"In most method responses an additional ",{"type":14,"tag":22,"props":641,"children":642},{"className":7},[643],{"type":19,"value":644},"asset_id",{"type":19,"value":646}," field is returned by default even if assets support is not enabled. It is always 0 for BEAM and can be safely ignored.",{"type":14,"tag":112,"props":648,"children":650},{"id":649},"ipfs-support",[651],{"type":19,"value":652},"IPFS Support",{"type":14,"tag":15,"props":654,"children":655},{},[656],{"type":19,"value":657},"String with v6.3 BEAM comes with built-in IPFS support. Please refer to the following pages for more details",{"type":14,"tag":30,"props":659,"children":660},{},[661,671],{"type":14,"tag":34,"props":662,"children":663},{},[664],{"type":14,"tag":38,"props":665,"children":668},{"href":666,"rel":667},"https://github.com/BeamMW/beam/wiki/BEAM-IPFS-Support",[42],[669],{"type":19,"value":670},"BEAM IPFS Support",{"type":14,"tag":34,"props":672,"children":673},{},[674],{"type":14,"tag":38,"props":675,"children":678},{"href":676,"rel":677},"https://github.com/BeamMW/beam/wiki/Beam-wallet-protocol-API-v6.3",[42],[679],{"type":19,"value":680},"v6.3 API",{"title":7,"searchDepth":682,"depth":682,"links":683},2,[684,685,690,691,692,693,694,695,696,697,698,699],{"id":114,"depth":682,"text":117},{"id":139,"depth":682,"text":142,"children":686},[687,689],{"id":220,"depth":688,"text":223},3,{"id":235,"depth":688,"text":238},{"id":278,"depth":682,"text":281},{"id":297,"depth":682,"text":300},{"id":319,"depth":682,"text":322},{"id":343,"depth":682,"text":346},{"id":370,"depth":682,"text":373},{"id":437,"depth":682,"text":440},{"id":454,"depth":682,"text":457},{"id":530,"depth":682,"text":533},{"id":591,"depth":682,"text":594},{"id":649,"depth":682,"text":652},"markdown","content:docs:core-tech:Beam-wallet-protocol-API.md","content","docs/core-tech/Beam-wallet-protocol-API.md","md",1702260893688]